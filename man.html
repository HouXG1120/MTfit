

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mtfit &mdash; mtfit documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/style.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="mtfit documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> mtfit
          

          
            
            <img src="_static/mtfitsphinx.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0+untagged.15.g53a39ba
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="setup.html">1. Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="run.html">2. Running mtfit</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">3. Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="real-tutorial.html">4. Tutorial: Real Data Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="bayes.html">5. Bayesian Approach</a></li>
<li class="toctree-l1"><a class="reference internal" href="probability.html">6. Probability Density Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="algorithms.html">7. Search Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="mtconvert.html">8. Moment Tensor Conversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">9. Command Line Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="mtplot.html">10. Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_classes.html">11. Plot Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="mtplotcli.html">12. MTplot Command Line Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="inversion.html">13. Inversion Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions.html">14. Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">15. References</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">16. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="source.html">17. Source Code</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">mtfit</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>mtfit</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/man.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mtfit">
<h1>mtfit<a class="headerlink" href="#mtfit" title="Permalink to this headline">¶</a></h1>
<p>Bayesian Moment Tensor Inversion Code by David J Pugh
mtfit is based on the bayesian approach presented in Pugh, D J, 2015,
Bayesian Source Inversion of Microseismic Events, PhD Thesis, Department of Earth Sciences,
University of Cambridge.</p>
<p>The code can be called from the command line directly or from within python itself (see below)</p>
<p><strong>Restricted:  For Non-Commercial Use Only</strong>
This code is protected intellectual property and is available solely for teaching
and non-commercially funded academic research purposes.</p>
<p>Applications for commercial use should be made to Schlumberger or the University of Cambridge.</p>
<div class="section" id="input-data">
<h2>Input Data<a class="headerlink" href="#input-data" title="Permalink to this headline">¶</a></h2>
<p>There are several different input data types, and it is also possible to add additional parsers using the <code class="docutils literal"><span class="pre">mtfit.parsers</span></code> entry point.</p>
<p>The required data structure for running mtfit is very simple, the inversion expects a python dictionary of the data in the format:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;PPolarity&#39;</span><span class="p">:{</span><span class="s1">&#39;Measured&#39;</span><span class="p">:</span><span class="n">numpy</span><span class="o">.</span><span class="n">matrix</span><span class="p">([[</span><span class="o">-</span><span class="mi">1</span><span class="p">],[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">...</span><span class="p">]),</span>
<span class="go">                     &#39;Error&#39;:numpy.matrix([[0.01],[0.02],...]),</span>
<span class="go">                     &#39;Stations&#39;:{&#39;Name&#39;:[&#39;Station1&#39;,&#39;Station2&#39;,...],</span>
<span class="go">                                 &#39;Azimuth&#39;:numpy.matrix([[248.0],[122.3]...]),</span>
<span class="go">                                 &#39;TakeOffAngle&#39;:numpy.matrix([[24.5],[22.8]...]),</span>
<span class="go">                                }</span>
<span class="go">                     },</span>
<span class="go">          &#39;PSHAmplitudeRatio&#39;:{...},</span>
<span class="go">          ...</span>
<span class="go">          &#39;UID&#39;:&#39;Event1&#39;</span>
<span class="go">          }</span>
</pre></div>
</div>
<p>For more information on the data keywords and how to set them up, see <a class="reference internal" href="inversion.html#mtfit.inversion.Inversion" title="mtfit.inversion.Inversion"><code class="xref py py-class docutils literal"><span class="pre">Inversion</span></code></a> docstrings.</p>
<p>The data dictionary can be passed directly to the <a class="reference internal" href="inversion.html#mtfit.inversion.Inversion" title="mtfit.inversion.Inversion"><code class="xref py py-class docutils literal"><span class="pre">Inversion</span></code></a> object (simple if running within python), or from a binary pickled object, these can be made by simply using pickle (or cPickle):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="s1">&#39;wb&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>The coordinate system is that the Azimuth is angle from x towards y and TakeOffAngle is the angle from positive z.</p>
<p>For data in different formats it is necessary to write a parser to convert the data into this dictionary format.</p>
<p>There is a parser for csv files with format</p>
<div class="section" id="csv">
<h3>CSV<a class="headerlink" href="#csv" title="Permalink to this headline">¶</a></h3>
<p>There is a CSV format parser which reads CSV files.
The CSV file format is to have events split by blank lines, a header line showing where the information is, UID and data-type information stored in the first column, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">UID</span><span class="o">=</span><span class="mi">123</span><span class="p">,,,,</span>
<span class="n">PPolarity</span><span class="p">,,,,</span>
<span class="n">Name</span><span class="p">,</span><span class="n">Azimuth</span><span class="p">,</span><span class="n">TakeOffAngle</span><span class="p">,</span><span class="n">Measured</span><span class="p">,</span><span class="n">Error</span>
<span class="n">S001</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">70</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.01</span>
<span class="n">S002</span><span class="p">,</span><span class="mi">160</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.02</span>
<span class="n">P</span><span class="o">/</span><span class="n">SHRMSAmplitudeRatio</span><span class="p">,,,,</span>
<span class="n">Name</span><span class="p">,</span><span class="n">Azimuth</span><span class="p">,</span><span class="n">TakeOffAngle</span><span class="p">,</span><span class="n">Measured</span><span class="p">,</span><span class="n">Error</span>
<span class="n">S003</span><span class="p">,</span><span class="mi">110</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.05</span> <span class="mf">0.04</span>
<span class="p">,,,,</span>
<span class="n">PPolarity</span> <span class="p">,,,,</span>
<span class="n">Name</span><span class="p">,</span><span class="n">Azimuth</span><span class="p">,</span><span class="n">TakeOffAngle</span><span class="p">,</span><span class="n">Measured</span><span class="p">,</span><span class="n">Error</span>
<span class="n">S003</span><span class="p">,</span><span class="mi">110</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.05</span>
</pre></div>
</div>
<p>This is a CSV file with 2 events, one event ID of 123, and PPolarity data at station S001 and station S002 and P/SHRMSAmplitude data at station S003,
and a second event with no ID (will default to the event number, in this case 2) with PPolarity data at station S003.</p>
</div>
<div class="section" id="hyp">
<h3>hyp<a class="headerlink" href="#hyp" title="Permalink to this headline">¶</a></h3>
<p>There is a hyp format parser which reads hyp files as defined by <a class="reference external" href="http://alomax.free.fr/nlloc/soft6.00/formats.html#_location_hypphs_">NonLinLoc</a>, this allows output files from NonLinLoc to be directly read.</p>
</div>
</div>
<div class="section" id="output">
<h2>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h2>
<p>The default output is to output a MATLAB file containing 2 structures and a cell array, although there are two other possible formats, and others can be added (see mtfit.extensions).
The <code class="docutils literal"><span class="pre">Events</span></code> structure has the following fieldnames: <code class="docutils literal"><span class="pre">MTspace</span></code> and <code class="docutils literal"><span class="pre">Probability</span></code>.</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal"><span class="pre">MTspace</span></code> - The moment tensor samples as a 6 by n vector of the form:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Mxx</span>
<span class="n">Myy</span>
<span class="n">Mzz</span>
<span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">Mxy</span>
<span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">Mxz</span>
<span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">Myz</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Probability</span></code> - The corresponding probability values</p>
</li>
</ul>
</div></blockquote>
<p>The <code class="docutils literal"><span class="pre">Other</span></code> structure contains information about the inversion</p>
<p>The <code class="docutils literal"><span class="pre">Stations</span></code> cell array contains the station information, including, if available, the polarity:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="28%" />
<col width="34%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Name</td>
<td>Azimuth(angle from x)</td>
<td>TakeOffAngle(angle from z)</td>
<td>P Polarity (if available)</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>A log file for each event is also produced to help with debugging and understanding the results.</p>
<div class="section" id="pickle-format">
<h3>Pickle format<a class="headerlink" href="#pickle-format" title="Permalink to this headline">¶</a></h3>
<p>It is also possible to output the data structure as a pickled file using the pickle output options, storing the output dictionary as a pickled file.</p>
</div>
<div class="section" id="hyp-format">
<h3>hyp format<a class="headerlink" href="#hyp-format" title="Permalink to this headline">¶</a></h3>
<p>The results can be outputted in the <a class="reference external" href="http://alomax.free.fr/nlloc/soft6.00/formats.html#_location_hypphs_">NonLinLoc hyp format</a>,
with the range of solutions sampled outputted as a binary file with the following format:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">binary</span> <span class="n">file</span> <span class="n">version</span> <span class="p">(</span><span class="n">unsigned</span> <span class="n">long</span> <span class="n">integer</span><span class="p">)</span>
<span class="n">total_number_samples</span><span class="p">(</span><span class="n">unsigned</span> <span class="n">long</span> <span class="n">integer</span><span class="p">)</span>
<span class="n">number_of_saved_samples</span><span class="p">(</span><span class="n">unsigned</span> <span class="n">long</span> <span class="n">integer</span><span class="p">)</span>
<span class="n">converted</span> <span class="p">(</span><span class="nb">bool</span> <span class="n">flag</span><span class="p">)</span>
<span class="n">Ln_bayesian_evidence</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="n">Kullback</span><span class="o">-</span><span class="n">Liebeler</span> <span class="n">Divergence</span> <span class="kn">from</span> <span class="nn">sampling</span> <span class="n">prior</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
</pre></div>
</div>
<p>Then for each moment tensor sample (up to <code class="docutils literal"><span class="pre">number_of_saved_samples</span></code> ):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Probability</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="n">Ln_probability</span><span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="n">Mnn</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="n">Mee</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="n">Mdd</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="n">Mne</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="n">Mnd</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="n">Med</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
</pre></div>
</div>
<p>if Converted is true then each sample also contains:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">gamma</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="n">delta</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="n">kappa</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="n">h</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="n">sigma</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="n">u</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="n">v</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="n">strike1</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="n">dip1</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="n">rake1</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="n">strike2</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="n">dip2</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="n">rake2</span> <span class="p">(</span><span class="n">double</span><span class="p">)</span>
</pre></div>
</div>
<p>If there are multiple events saved, then the next event starts immediately after the last with the same format. The output binary file can be re-read into python using mtfit.inversion.read_binary_output.</p>
</div>
</div>
<div class="section" id="running-in-parallel">
<h2>Running in parallel<a class="headerlink" href="#running-in-parallel" title="Permalink to this headline">¶</a></h2>
<p>The code is written to run in parallel using multiprocessing, it will initialise as many threads as the system reports available.
A single thread mode can be forced using:</p>
<blockquote>
<div><ul class="simple">
<li>-l, --singlethread, --single, --single_thread flag on the command line</li>
<li>parallel=False keyword in the mtfit.inversion.Inversion object initialisation</li>
</ul>
</div></blockquote>
<p>It is also possible to run this code on a cluster using qsub [requires pyqsub]. This can be called from the commandline using a flag:</p>
<blockquote>
<div><ul class="simple">
<li>-q, --qsub, --pbs</li>
</ul>
</div></blockquote>
<p>This runs using a set of default parameters, however it is also possible to adjust these parameters using commandline flags (use -h flag for help and usage).</p>
<p>There is a bug when using mpi and very large result sizes, giving a size error (negative integer) in mpi4py. If this occurs, lower the sample size and it will be ok.</p>
<p>WARNING:</p>
<blockquote>
<div>If running this on a server, be aware that not setting the number of workers option <code class="docutils literal"><span class="pre">--numberworkers</span></code>, when running in parallel, means that as many processes as processors will be spawned, slowing down the machine for any other users.</div></blockquote>
</div>
<div class="section" id="command-line-flags">
<h2>Command line flags<a class="headerlink" href="#command-line-flags" title="Permalink to this headline">¶</a></h2>
<p>To obtain a list of the command line flags use the -h flag:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ mtfit -h
</pre></div>
</div>
<p>This will provide a list of the arguments and their usage.</p>
</div>
<div class="section" id="running-from-the-command-line">
<h2>Running from the command line<a class="headerlink" href="#running-from-the-command-line" title="Permalink to this headline">¶</a></h2>
<p>To run from the command line on  linux/<a href="#id1"><span class="problematic" id="id2">*</span></a>nix  it is necessary to make sure that the mtfit script installed is on the path,
or to set up a manual alias/script, e.g. for bash:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ python -c &quot;import mtfit;mtfit.run.mtfit()&quot; $*
</pre></div>
</div>
<p>On windows using powershell add the following commandlet to your profile (for information on customizing your powershell profile see: <a class="reference external" href="http://www.howtogeek.com/50236/customizing-your-powershell-profile/">http://www.howtogeek.com/50236/customizing-your-powershell-profile/</a>):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>function mtfit{
    $script={
        python -c &quot;import mtfit;mtfit.run.mtfit()&quot; $args
    }
    Invoke-Command -ScriptBlock $script -ArgumentList $args
}
</pre></div>
</div>
</div>
<div class="section" id="running-from-within-python">
<h2>Running from within python<a class="headerlink" href="#running-from-within-python" title="Permalink to this headline">¶</a></h2>
<p>To run from within python, (assuming the module is on your PYTHONPATH) first:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">mtfit</span>
</pre></div>
</div>
<p>Then to run the inversion it is necessary to set up an mtfit.inversion.Inversion object:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">myInversion</span><span class="o">=</span><span class="n">mtfit</span><span class="o">.</span><span class="n">Inversion</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>For more information on the arguments for initialising the inversion object, see the mtfit.inversion.Inversion docstrings</p>
</div>
<div class="section" id="running-module-tests">
<h2>Running Module Tests<a class="headerlink" href="#running-module-tests" title="Permalink to this headline">¶</a></h2>
<p>There is a unittest suite for this module that can be run from the python interpreter:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">mtfit</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mtfit</span><span class="o">.</span><span class="n">run_tests</span><span class="p">()</span>
</pre></div>
</div>
<p>Or during setup:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">test</span>
</pre></div>
</div>
<p>If there are any errors please see the documentation and if necessary contact the developer for assistance.</p>
</div>
<div class="section" id="command-line-options">
<h2>Command Line Options<a class="headerlink" href="#command-line-options" title="Permalink to this headline">¶</a></h2>
<p>Usage:</p>
<blockquote>
<div><dl class="docutils">
<dt>mtfit [-h] [-d DATAFILE] [-s LOCATION_PDF_FILE_PATH]</dt>
<dd>[-a {iterate,time,mcmc,transdmcmc}] [-l] [-n N] [-m MEM] [-c]
[-b] [--nstations NUMBER_STATIONS]
[--nanglesamples NUMBER_LOCATION_SAMPLES] [-f] [--not_file_safe]
[-i INVERSION_OPTIONS] [-o FID] [-x MAX_SAMPLES] [-t MAX_TIME]
[-e] [-r] [--marginalise_relative] [-R] [--invext DATA_EXTENSION]
[--angleext ANGLE_EXTENSION] [-S MINIMUM_NUMBER_INTERSECTIONS]
[-M] [-B] [-X MIN_NUMBER_INITIALISATION_SAMPLES] [-T]
[-Q [QUALITY_CHECK]] [-D] [-V VERBOSITY] [-g]
[-j DIMENSION_JUMP_PROB] [-y {grid}] [-u MIN_ACCEPTANCE_RATE]
[-v MAX_ACCEPTANCE_RATE] [-w ACCEPTANCE_RATE_WINDOW]
[-W WARNINGS] [-z LEARNING_LENGTH] [--version] [--mpi_call]
[--output-format {hyp,pickle,matlab}]
[--results-format {hyp,full_pdf}] [--no-dist]
[--dc-prior DC_PRIOR] [--sampling SAMPLING]
[--sample-models SAMPLE_DISTRIBUTION]
[--sampling-prior SAMPLING_PRIOR] [--no-normalise] [--convert]
[--discard DISCARD] [--mpioutput] [--combine_mpi_output]
[--c_generate] [--relative_loop] [--bin-scatangle]
[--bin-size BIN_SCATANGLE_SIZE] [-q] [--nodes QSUB_NODES]
[--ppn QSUB_PPN] [--pmem QSUB_PMEM] [--email QSUB_M]
[--emailoptions QSUB_M] [--name QSUB_N]
[--walltime QSUB_WALLTIME] [--queue QSUB_Q]
[--bladeproperties QSUB_BLADE_PROPERTIES]
[--feature QSUB_BLADE_FEATURE]
[data_file]</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="positional-arguments">
<h2>Positional Arguments:<a class="headerlink" href="#positional-arguments" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="docutils">
<dt>data_file             Data file to use for the inversion, optional but must</dt>
<dd>be specified either as a positional argument or as an
optional argument (see -d below) If not specified
defaults to all <a href="#id3"><span class="problematic" id="id4">*</span></a>.inv files in current directory, and
searches for all anglescatterfiles in the directory
too. Inversion file extension can be set using
--invext option. Angle scatter file extension can be
set using --angleext option</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="optional-arguments">
<h2>Optional Arguments:<a class="headerlink" href="#optional-arguments" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></td>
<td>show this help message and exit</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-d <var>DATAFILE</var></span>, <span class="option">--datafile <var>DATAFILE</var></span>, <span class="option">--data_file <var>DATAFILE</var></span></kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Data file to use for the inversion. Can be provided as
a positional argument.</p>
<blockquote>
<div><p>There are several different data file types:</p>
<blockquote>
<div><ul class="simple">
<li>pickled dictionary</li>
<li>csv file</li>
<li>NLLOC hyp file</li>
</ul>
</div></blockquote>
<p>The data file is a pickled python dictionary of</p>
</div></blockquote>
<p>the form::
{'DataType':{'Stations':{'Name':['STA1','STA2',...],</p>
<blockquote>
<div><blockquote>
<div>'Azimuth':np.matrix([[190],[40],...]),
'TakeOffAngle':np.matrix([[70],[40],...])},
'Measured':np.matrix([[1],[-1],...]),
'Error':np.matrix([[0.01],[0.02],...])}}</div></blockquote>
<dl class="docutils">
<dt>e.g.::</dt>
<dd>{'P/SHRMSAmplitudeRatio':{'Stations':{'Name':['S</dd>
</dl>
</div></blockquote>
<dl class="docutils">
<dt>0649',&quot;S0162&quot;],</dt>
<dd>'Azimuth':np.array([90.0,270.0]),
'TakeOffAngle':np.array([30.0,60.0])},
'Measured':np.matrix([[1],[-1]]),
'Error':np.matrix([[ 0.001,0.02],[</dd>
</dl>
<p>0.001,0.001]])}}</p>
<blockquote>
<div>Or a CSV file with events split by blank lines, a</div></blockquote>
<p>header line showing which row corresponds to which
information (default is as shown here),</p>
<blockquote>
<div>UID and data-type information stored in the first</div></blockquote>
<dl class="docutils">
<dt>column,</dt>
<dd><dl class="first docutils">
<dt>e.g.::</dt>
<dd>UID=123,,,,
PPolarity,,,,
Name,Azimuth,TakeOffAngle,Measured,Error
S001,120,70,1,0.01
S002,160,60,-1,0.02
P/SHRMSAmplitudeRatio,,,,
Name,Azimuth,TakeOffAngle,Measured,Error
S003,110,10,1,0.05 0.04
,,,,
PPolarity ,,,,
Name,Azimuth,TakeOffAngle,Measured,Error
S003,110,10,1,0.05</dd>
</dl>
<p class="last">Is a CSV file with 2 events, one event UID of 123,</p>
</dd>
</dl>
<p>and PPolarity data at S001 and S002 and
P/SHRMSAmplitude data at S003,</p>
<blockquote>
<div>and a second event with no UID (will default to</div></blockquote>
<p>the event number, in this case 2) with PPolarity data
at S003.</p>
<blockquote>
<div>This data format can be constructed manually or</div></blockquote>
<p class="last">automatically.</p>
</td></tr>
</tbody>
</table>
<p>-s LOCATION_PDF_FILE_PATH, --anglescatterfilepath LOCATION_PDF_FILE_PATH,
--location_pdf_file_path LOCATION_PDF_FILE_PATH,
--location_file_path LOCATION_PDF_FILE_PATH,
--scatterfilepath LOCATION_PDF_FILE_PATH,
--scatter_file_path LOCATION_PDF_FILE_PATH</p>
<blockquote>
<div><p>Path to location scatter angle files - wild cards
behave as normal.</p>
<blockquote>
<div>To include the model and location uncertainty, a</div></blockquote>
<dl class="docutils">
<dt>ray path angle pdf file must be provided.</dt>
<dd><p class="first">This is of the form::
probability1
Station1    Azimuth1    TakeOffAngle1
Station2    Azimuth2    TakeOffAngle2
.
.
.
StationN    AzimuthN    TakeOffAngleN</p>
<p>probability2
Station1    Azimuth1    TakeOffAngle1
Station2    Azimuth2    TakeOffAngle2
.
.
.
StationN    AzimuthN    TakeOffAngleN</p>
<p class="last">e.g.::
504.7
S0529   326.1   131.7
S0083   223.7   118.2
S0595   42.6    117.8
S0236   253.6   118.6
&amp;&amp;
504.7
S0529   326.1   131.8
S0083   223.7   118.2
S0595   42.7    117.9
S0236   253.5   118.7</p>
</dd>
</dl>
</div></blockquote>
<dl class="docutils">
<dt>-a {iterate,time,mcmc,transdmcmc}, --algorithm {iterate,time,mcmc,transdmcmc}</dt>
<dd><p class="first">Selects the algorithm used for the search.
[default=time]</p>
<blockquote>
<div><dl class="docutils">
<dt>Possible algorithms are:</dt>
<dd>iterate (random sampling of the source space</dd>
</dl>
</div></blockquote>
<dl class="last docutils">
<dt>for a set number of samples)</dt>
<dd>time (random sampling of the source space for</dd>
<dt>a set time)</dt>
<dd>mcmc (Markov chain Monte Carlo sampling)</dd>
</dl>
</dd>
</dl>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-l</span>, <span class="option">--singlethread</span>, <span class="option">--single</span>, <span class="option">--single_thread</span></kbd></td>
</tr>
<tr><td>&#160;</td><td>Flag to disable parallel computation</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-n <var>N</var></span>, <span class="option">--numberworkers <var>N</var></span>, <span class="option">--number_workers <var>N</var></span></kbd></td>
</tr>
<tr><td>&#160;</td><td>Set the number of workers used in the parallel
computation. [default=all available cpus]</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-m <var>MEM</var></span>, <span class="option">--mem <var>MEM</var></span>, <span class="option">--memory <var>MEM</var></span>, <span class="option">--physical_memory <var>MEM</var></span>, <span class="option">--physicalmemory <var>MEM</var></span></kbd></td>
</tr>
<tr><td>&#160;</td><td>Set the maximum memory used in Gb if psutil not
available [default=8Gb]</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-c</span>, <span class="option">--doublecouple</span>, <span class="option">--double-couple</span>, <span class="option">--double_couple</span>, <span class="option">--dc</span>, <span class="option">--DC</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><blockquote class="first">
<div>Flag to constrain the inversion to double-couple</div></blockquote>
<p class="last">sources only</p>
</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-b</span>, <span class="option">--compareconstrained</span>, <span class="option">--compare_constrained</span></kbd></td>
</tr>
<tr><td>&#160;</td><td><blockquote class="first">
<div>Flag to run two inversions, one constrained to</div></blockquote>
<p class="last">double-couple and one unconstrained</p>
</td></tr>
</tbody>
</table>
<p class="attribution">&mdash;nstations NUMBER_STATIONS
Set the maximum number of stations without having to
load an angle pdf file - used for calculating sample
sizes and memory sizes, and can speed up the
calculation a bit, but has no effect on result.</p>
</div></blockquote>
<blockquote>
<div><p>--nanglesamples NUMBER_LOCATION_SAMPLES,
--nlocationsamples NUMBER_LOCATION_SAMPLES,
--number_location_samples NUMBER_LOCATION_SAMPLES,
--number-location-samples NUMBER_LOCATION_SAMPLES</p>
<blockquote>
<div>Set the maximum number of angle pdf samples to use. If
this is less than the total number of samples, a
subset are randomly selected [default=0].</div></blockquote>
<p>-f, --file_sample, --file-sample, --filesample, --disk_sample,
--disk-sample, --disksample</p>
<blockquote>
<div>Save sampling to disk (allows for easier recovery and
reduces memory requirements, but can be slower)</div></blockquote>
<p class="attribution">&mdash;not_file_safe, --not-file-safe, --notfilesafe, --no_file_safe,
--no-file-safe, --nofilesafe</p>
</div></blockquote>
<blockquote>
<div><blockquote>
<div>Disable file safe saving (i.e. copy and write to .mat~
then copy back</div></blockquote>
<p>-i INVERSION_OPTIONS, --inversionoptions INVERSION_OPTIONS,
--inversion_options INVERSION_OPTIONS</p>
<blockquote>
<div><dl class="docutils">
<dt>Set the inversion data types to use: comma delimited.</dt>
<dd>If not set, the inversion uses all the data types</dd>
<dt>in the data file.</dt>
<dd><p class="first">e.g.
PPolarity,P/SHRMSAmplitudeRatio</p>
<p class="last">Needs to correspond to the data types in the data</p>
</dd>
</dl>
<p>file.</p>
<blockquote>
<div>If not specified can lead to independence errors:</div></blockquote>
<dl class="docutils">
<dt>e.g.</dt>
<dd>P/SH Amplitude Ratio and P/SV Amplitude Ratio can</dd>
<dt>give SH/SV Amplitude Ratio.</dt>
<dd>Therefore using SH/SV Amplitude Ratio in the</dd>
</dl>
<p>inversion is reusing data and will artificially
sharpen the PDF.</p>
<blockquote>
<div>This applies to all forms of dependent</div></blockquote>
<p>measurements.</p>
</div></blockquote>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-o <var>FID</var></span>, <span class="option">--out <var>FID</var></span>, <span class="option">--fid <var>FID</var></span>, <span class="option">--outputfile <var>FID</var></span>, <span class="option">--outfile <var>FID</var></span></kbd></td>
</tr>
<tr><td>&#160;</td><td>Set output file basename [default=mtfitOutput]</td></tr>
</tbody>
</table>
<p>-x MAX_SAMPLES, --samples MAX_SAMPLES, --maxsamples MAX_SAMPLES,
--max_samples MAX_SAMPLES, --chain_length MAX_SAMPLES,
--max-samples MAX_SAMPLES, --chain-length MAX_SAMPLES, --chainlength MAX_SAMPLES</p>
<blockquote>
<div>Iteration algorithm: Set maximum number of samples to
use [default=6000000]. McMC algorithms: Set chain
length [default=10000], trans-d McMC [default=100000]</div></blockquote>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-t <var>MAX_TIME</var></span>, <span class="option">--time <var>MAX_TIME</var></span>, <span class="option">--maxtime <var>MAX_TIME</var></span>, <span class="option">--max_time <var>MAX_TIME</var></span></kbd></td>
</tr>
<tr><td>&#160;</td><td>Time algorithm: Set maximum time to use [default=600]</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-e</span>, <span class="option">--multiple_events</span>, <span class="option">--multiple-events</span></kbd></td>
</tr>
<tr><td>&#160;</td><td>Run using events using joint PDF approach</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-r</span>, <span class="option">--relative_amplitude</span>, <span class="option">--relative-amplitude</span></kbd></td>
</tr>
<tr><td>&#160;</td><td>Run using events using joint PDF approach</td></tr>
</tbody>
</table>
<p class="attribution">&mdash;marginalise_relative, --marginalise, --marginalise-relative
Flag to marginalise location uncertainty in relative
amplitude case [default=False]</p>
</div></blockquote>
<blockquote>
<div><table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-R</span>, <span class="option">--recover</span></kbd></td>
<td>Recover crashed run (ie restart from last event not
written out)]</td></tr>
</tbody>
</table>
<p class="attribution">&mdash;invext DATA_EXTENSION, --dataextension DATA_EXTENSION,
--dataext DATA_EXTENSION, --data-extension DATA_EXTENSION,
--data_extension DATA_EXTENSION</p>
</div></blockquote>
<blockquote>
<div><blockquote>
<div>Set data file extension to search for when inverting
on a folder</div></blockquote>
<p class="attribution">&mdash;angleext ANGLE_EXTENSION, --locationextension ANGLE_EXTENSION,
--locationext ANGLE_EXTENSION, --location-extension ANGLE_EXTENSION,
--location_extension ANGLE_EXTENSION</p>
</div></blockquote>
<blockquote>
<div><blockquote>
<div>Set location sample file extension to search for when
inverting on a folder</div></blockquote>
<p>-S MINIMUM_NUMBER_INTERSECTIONS,
--minimum_number_intersections MINIMUM_NUMBER_INTERSECTIONS,
--min_number_intersections MINIMUM_NUMBER_INTERSECTIONS,
--minimum-number-intersections MINIMUM_NUMBER_INTERSECTIONS,
--min-number-intersections MINIMUM_NUMBER_INTERSECTIONS</p>
<blockquote>
<div>For relative amplitude inversion, the minimum number
of intersecting stations required (must be greater
than 1) [default=2]</div></blockquote>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-M</span>, <span class="option">--mpi</span>, <span class="option">--MPI</span></kbd></td>
</tr>
<tr><td>&#160;</td><td>Run using mpi - will reinitialise using mpirun (mpi
etc needs to be added to path)</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-B</span>, <span class="option">--benchmark</span>, <span class="option">--benchmarking</span></kbd></td>
</tr>
<tr><td>&#160;</td><td>Run benchmark tests for the event</td></tr>
</tbody>
</table>
<p>-X MIN_NUMBER_INITIALISATION_SAMPLES,
--min_number_check_samples MIN_NUMBER_INITIALISATION_SAMPLES,
--min_number_initialisation_samples MIN_NUMBER_INITIALISATION_SAMPLES</p>
<blockquote>
<div>Minimum number of samples for McMC initialiser, or the
minimum number of samples required when using quality
check (-Q)</div></blockquote>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-T</span>, <span class="option">--test</span>, <span class="option">--test</span></kbd></td>
</tr>
<tr><td>&#160;</td><td>Run mtfit Test suite (if combined with -q runs test
suite on cluster</td></tr>
</tbody>
</table>
<dl class="docutils">
<dt>-Q [QUALITY_CHECK], --quality [QUALITY_CHECK]</dt>
<dd>Run mtfit with quality checks enabled [default=False].
Checks if an event has a percentage of non-zero
samples lower than the flag - values from 0-100.</dd>
</dl>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-D</span>, <span class="option">--debug</span></kbd></td>
<td>Run mtfit with debugging enabled.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-V <var>VERBOSITY</var></span>, <span class="option">--verbosity <var>VERBOSITY</var></span></kbd></td>
</tr>
<tr><td>&#160;</td><td>Set verbosity level for non-fatal errors [default=0].</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-g</span>, <span class="option">--diagnostics</span></kbd></td>
</tr>
<tr><td>&#160;</td><td>Run mtfit with diagnostic output. Outputs the full
chain and sampling - wil make a large file.</td></tr>
</tbody>
</table>
<p>-j DIMENSION_JUMP_PROB, --jumpProbability DIMENSION_JUMP_PROB,
--jumpProb DIMENSION_JUMP_PROB, --jumpprob DIMENSION_JUMP_PROB,
--jumpProb DIMENSION_JUMP_PROB, --dimensionJumpProb DIMENSION_JUMP_PROB,
--dimensionjumpprob DIMENSION_JUMP_PROB</p>
<blockquote>
<div>Sets the probability of making a dimension jump in the
Trans-Dimensional McMC algorithm [default=0.01]</div></blockquote>
<dl class="docutils">
<dt>-y {grid}, --initialSampling {grid}</dt>
<dd>Sets the initialisation sampling method for McMC
algorithms choices:
grid - use grid based sampling to find non-zero
initial sample [default=grid]</dd>
</dl>
<p>-u MIN_ACCEPTANCE_RATE, --minAcceptanceRate MIN_ACCEPTANCE_RATE,
--minacceptancerate MIN_ACCEPTANCE_RATE,
--min_acceptance_rate MIN_ACCEPTANCE_RATE</p>
<blockquote>
<div>Set the minimum acceptance rate for the McMC algorithm
[mcmc default=0.3, transdmcmc default=0.05]</div></blockquote>
<p>-v MAX_ACCEPTANCE_RATE, --maxAcceptanceRate MAX_ACCEPTANCE_RATE,
--maxacceptancerate MAX_ACCEPTANCE_RATE,
--max_acceptance_rate MAX_ACCEPTANCE_RATE</p>
<blockquote>
<div>Set the maximum acceptance rate for the McMC algorithm
[mcmc default=0.5, transdmcmc default=0.2]</div></blockquote>
<p>-w ACCEPTANCE_RATE_WINDOW,
--acceptanceLearningWindow ACCEPTANCE_RATE_WINDOW,
--acceptancelearningwindow ACCEPTANCE_RATE_WINDOW</p>
<blockquote>
<div>Sets the window for calculating and updating the
acceptance rate for McMC algorithms [default=500]</div></blockquote>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-W <var>WARNINGS</var></span>, <span class="option">--warnings <var>WARNINGS</var></span>, <span class="option">--Warnings <var>WARNINGS</var></span></kbd></td>
</tr>
<tr><td>&#160;</td><td><p class="first">Sets the warning visibility.</p>
<blockquote>
<div><p>options are:</p>
<blockquote>
<div><ul class="simple">
<li>&quot;e&quot;,&quot;error&quot; - turn matching warnings into</li>
</ul>
</div></blockquote>
</div></blockquote>
<dl class="docutils">
<dt>exceptions</dt>
<dd><ul class="first last simple">
<li>&quot;i&quot;,&quot;ignore&quot; - never print matching warnings</li>
<li>&quot;a&quot;,&quot;always&quot; - always print matching</li>
</ul>
</dd>
<dt>warnings</dt>
<dd><ul class="first last simple">
<li>&quot;d&quot;,&quot;default&quot; - print the first occurrence</li>
</ul>
</dd>
</dl>
<p>of matching warnings for each location where the
warning is issued</p>
<blockquote>
<div><ul class="simple">
<li>&quot;m&quot;,&quot;module&quot; - print the first occurrence of</li>
</ul>
</div></blockquote>
<p>matching warnings for each module where the warning is
issued</p>
<blockquote>
<div><ul class="simple">
<li>&quot;o&quot;,&quot;once&quot; - print only the first occurrence</li>
</ul>
</div></blockquote>
<p class="last">of matching warnings, regardless of location</p>
</td></tr>
</tbody>
</table>
<p>-z LEARNING_LENGTH, --learningLength LEARNING_LENGTH,
--learninglength LEARNING_LENGTH, --learning_length LEARNING_LENGTH</p>
<blockquote>
<div>Sets the number of samples to discard as the learning
period [default=5000]</div></blockquote>
<p class="attribution">&mdash;version             show program's version number and exit</p>
</div></blockquote>
<blockquote>
<div><table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--mpi_call</span></kbd></td>
<td>DO NOT USE - only for spawning mpi subprocess</td></tr>
</tbody>
</table>
<p class="attribution">&mdash;output-format {hyp,pickle,matlab}, --output_format {hyp,pickle,matlab},
--outputformat {hyp,pickle,matlab}, --format {hyp,pickle,matlab}</p>
</div></blockquote>
<blockquote>
<div><blockquote>
<div>Output file format [default=matlab]</div></blockquote>
<p class="attribution">&mdash;results-format {hyp,full_pdf}, --results_format {hyp,full_pdf},
--resultsformat {hyp,full_pdf}</p>
</div></blockquote>
<blockquote>
<div><blockquote>
<div>Output results data format (extensible)
[default=full_pdf]</div></blockquote>
<p class="attribution">&mdash;no-dist, --no_dist, --nodist
Do not output station distribution if running location
samples</p>
</div></blockquote>
<blockquote>
<div><table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--dc-prior <var>DC_PRIOR</var></span>, <span class="option">--dc_prior <var>DC_PRIOR</var></span>, <span class="option">--dcprior <var>DC_PRIOR</var></span></kbd></td>
</tr>
<tr><td>&#160;</td><td>Prior probability for the double-couple model when
using the Trans-Dimensional McMC algorithm</td></tr>
</tbody>
</table>
<p class="attribution">&mdash;sampling SAMPLING, --sampling SAMPLING, --sampling SAMPLING
Random moment tensor sampling distribution</p>
</div></blockquote>
<blockquote>
<div><p>--sample-models SAMPLE_DISTRIBUTION,
--sample_distribution SAMPLE_DISTRIBUTION, --samplemodels SAMPLE_DISTRIBUTION</p>
<blockquote>
<div>Alternate models for random sampling (Monte Carlo
algorithms only)</div></blockquote>
<p class="attribution">&mdash;sampling-prior SAMPLING_PRIOR, --sampling_prior SAMPLING_PRIOR,
--samplingprior SAMPLING_PRIOR</p>
</div></blockquote>
<blockquote>
<div><blockquote>
<div>Prior probability for the model distribution when
using the McMC algorithm, alternatively the prior
distribution for the source type parameters gamma and
delta for use by the Bayesian evidence calculation for
the MC algorithms</div></blockquote>
<p class="attribution">&mdash;no-normalise, --no-norm, --no_normalise, --no_norm
Do not normalise the output pdf</p>
</div></blockquote>
<blockquote>
<div><table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--convert</span></kbd></td>
<td>Convert the output MTs to Tape parameters, hudson
parameters and strike dip rakes.</td></tr>
</tbody>
</table>
<p class="attribution">&mdash;discard DISCARD     Fraction of maxProbability * total samples to discard
as negligeable.</p>
</div></blockquote>
<blockquote>
<div><table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--mpioutput</span>, <span class="option">--mpi_output</span>, <span class="option">--mpi-output</span></kbd></td>
</tr>
<tr><td>&#160;</td><td>When the mpi flag -M is used outputs each processor
individually rather than combining</td></tr>
</tbody>
</table>
<p class="attribution">&mdash;combine_mpi_output, --combine-mpi-output, --combinempioutput
Combine the mpi output from the mpioutput flag. The
data path corresponds to the root path for the mpi
output</p>
</div></blockquote>
<blockquote>
<div><table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--c_generate</span>, <span class="option">--c-generate</span>, <span class="option">--generate</span></kbd></td>
</tr>
<tr><td>&#160;</td><td>Generate moment tensor samples in the probability
evaluation</td></tr>
</tbody>
</table>
<p class="attribution">&mdash;relative_loop, --relative-loop, --relativeloop, --loop
Loop over independent non-zero samples randomly to
construct joint rather than joint samples</p>
</div></blockquote>
</div>
<div class="section" id="scatangle">
<h2>Scatangle:<a class="headerlink" href="#scatangle" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--bin-scatangle</span>, <span class="option">--binscatangle</span>, <span class="option">--bin_scatangle</span></kbd></td>
</tr>
<tr><td>&#160;</td><td>Bin the scatangle file to reduce the number of samples
[default=False]. --bin-size Sets the bin size
parameter .</td></tr>
</tbody>
</table>
<p class="attribution">&mdash;bin-size BIN_SCATANGLE_SIZE, --binsize BIN_SCATANGLE_SIZE,
--bin_size BIN_SCATANGLE_SIZE</p>
</div></blockquote>
<blockquote>
<div><blockquote>
<div>Sets the scatangle bin size parameter [default=1.0]</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="cluster">
<h2>Cluster:<a class="headerlink" href="#cluster" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Commands for using mtfit on a cluster environment using qsub/PBS</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-q</span>, <span class="option">--qsub</span>, <span class="option">--pbs</span></kbd></td>
</tr>
<tr><td>&#160;</td><td>Flag to set mtfit to submit to cluster</td></tr>
</tbody>
</table>
<p class="attribution">&mdash;nodes QSUB_NODES    Set number of nodes to use for job submission.
[default=1]</p>
</div></blockquote>
<blockquote>
<div><table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--ppn <var>QSUB_PPN</var></span></kbd></td>
<td>Set ppn to use for job submission. [default=8]</td></tr>
</tbody>
</table>
<p class="attribution">&mdash;pmem QSUB_PMEM      Set pmem (Gb) to use for job submission.
[default=2Gb]</p>
</div></blockquote>
<blockquote>
<div><table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--email <var>QSUB_M</var></span></kbd></td>
<td>Set user email address.</td></tr>
</tbody>
</table>
<p class="attribution">&mdash;emailoptions QSUB_M
Set PBS -m mail options. Requires email address using
-M. [default=bae]</p>
</div></blockquote>
<blockquote>
<div><table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--name <var>QSUB_N</var></span></kbd></td>
<td>Set PBS -N job name options. [default=mtfit]</td></tr>
</tbody>
</table>
<p class="attribution">&mdash;walltime QSUB_WALLTIME
Set PBS maximum wall time. Needs to be of the form
HH:MM:SS. [default=24:00:00]</p>
</div></blockquote>
<blockquote>
<div><table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--queue <var>QSUB_Q</var></span></kbd></td>
<td>Set PBS -q Queue options. [default=batch]</td></tr>
</tbody>
</table>
<p class="attribution">&mdash;bladeproperties QSUB_BLADE_PROPERTIES
Set desired PBS blade properties. [default=False]</p>
</div></blockquote>
<blockquote>
<div><table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--feature <var>QSUB_BLADE_FEATURE</var></span></kbd></td>
</tr>
<tr><td>&#160;</td><td>Set desired Torque feature arguments. [default=False]</td></tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, David Pugh.
      Last updated on Oct 26, 2017 (version 0+untagged.15.g53a39ba).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0+untagged.15.g53a39ba',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>